## Distributed tracing demo in Golang
Demo code for my presentation on distributed tracing - get a grasp on your production. 

![dependecy diagram generated by zipkin](https://cloud.githubusercontent.com/assets/13149921/20249059/77efdd14-a9f1-11e6-8cf4-d5b557307395.png)

Note : To keep things simpler we are simulating calls to services such as db & analytic service

This app can be used as standalone
![standalone](https://cloud.githubusercontent.com/assets/13149921/20248922/05816fb0-a9ef-11e6-9bef-2510ce6cee23.png)

Or along with catalog-service(distributed application) to see how we can trace along services developed in different languages 

### Dependencies
The project needs [open-zipkin] (https://github.com/openzipkin/docker-zipkin) and mongodb to be up and running. You can launch them locally via docker:
```
docker run -d -p 9411:9411 openzipkin/zipkin
```
```
docker run -p 27017:27017 -d mongo
```
Verify whether everything is up
```
docker ps
```
And you should see something like this
![running process](https://cloud.githubusercontent.com/assets/13149921/20248339/5e770592-a9e2-11e6-8859-bec9cdde2157.png)

### Install
```
go install
```

### Launch
```
cd $GOPATH/bin
```

```
./go-distributed-tracing-demo
```

Note: You can also override default parameters, please refer to help for more details i.e.
```
./go-distributed-tracing-demo --help
```
![available options to override](https://cloud.githubusercontent.com/assets/13149921/20248273/a5058e0e-a9e0-11e6-825f-7b7d52e69dfd.png)

Or if you are using Intellij, then you can override those parameter in run configuration.
![override options in intellij](https://cloud.githubusercontent.com/assets/13149921/20248430/525540ba-a9e4-11e6-823c-97bde58c45ad.png)

### Sample Request
```
curl -v http://localhost:8090/1 | jq .
```
```json
[
  {
    "name": "Product A-100"
  },
  {
    "name": "Product B-100"
  }
]
```

###Zipkin-UI
You can visit [localhost:9411] (http://localhost:9411) providing you are running zipkin locally and select go-product-service
![selecting-services](https://cloud.githubusercontent.com/assets/13149921/20249109/9f5779b0-a9f2-11e6-8680-87e86fb73a4f.png)

And dependending on randomness(check the source code) you will see on of those traces. The blue ones depicts traces without any problem and yellow ones depicts span with error logs

![Zipkin-ui](https://cloud.githubusercontent.com/assets/13149921/20249140/5f7eb456-a9f3-11e6-8942-d62d2805f3f3.png)

You can click a particular span to view more details


